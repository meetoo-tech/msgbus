

# msgbus
消息总线的核心目的是解耦。

## 概叙
* 一个分布式的，基于订阅/发布机制的消息总线框架。
* 全C语言实现，与平台无关，可以在各种系统平台和裸机下使用。


## 分布式特性
* 支持至多32个设备间星型连接（两设备间只有1条路径），不支持网状连接（两设备间有多条路径）。
* 各设备只需要关注自身的相连的设备，不用关注整个设备网之间的连接关系。
* 各设备自动同步消息主题，全部设备都同步完成后，自动发布同步完成的内部消息。
* 支持跨设备订阅和发布主题消息。
* 支持设备重新同步主题。
* 支持主题只订阅设备本地发布消息。
* 支持强制（广播）发布消息。


## 移植特性
* 消息总线的的核心实现与系统完全无关（仅需要堆内存），所以可以运行在任何32/64位环境中。
* 将队列抽象的消息通道，由移植层实现。
* 消息总线的核心功能集成在一个函数中，由用户自行调用运行。

## 资源消耗
*主题同步完成后，每个设备都会生成一张相同主题表（一个红黑树），该表中每一个消息主题消耗20byte以上，所以消息总线不太适合在内存极度紧张的设备上使用。

## 待实现功能
* 取消主题订阅。
* 带回调函数主题订阅。
* 基于OS队列和POSIX接口的阻塞的等待消息发布功能。
  
